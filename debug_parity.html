<!DOCTYPE html>
<html>
<head>
    <title>Debug Parity</title>
</head>
<body>
    <h1>Debug parity calculation</h1>
    <pre id="output"></pre>
    
    <script src="classes.js"></script>
    <script>
        const allSubjectIds = [
            3621, 3622, 3623, 3624, 3625, 3626, 3627, 3628, 3629, 3630,
            3631, 3632, 3633, 3634, 3635, 3636, 3637, 3638, 3639, 3640,
            3641, 3642, 3643, 3644, 3645, 3646, 3647, 3648, 3649, 3650,
            3651, 3652, 3653, 3654, 3655, 3656, 3657, 3658, 3659, 3660,
            3661, 3662, 3663, 3664, 3665, 3666, 3668, 3669, 3670,
            3675, 3676, 3677, 3678, 3679, 3680,
            901, 902, 903, 904, 911, 912
        ];
        
        // 901 is completed now
        const notCompleted = [902, 903, 904, 3667, 3671];
        const completedSubjects = allSubjectIds.filter(id => !notCompleted.includes(id));
        
        const plan = new PlanDeEstudios();
        plan.cargarMateriasDesdeTexto(listado, completedSubjects);
        plan.cargarNombresDesdeTexto(tabla_nombres);
        
        let output = 'Parity calculation debug:\n';
        output += '========================\n\n';
        
        const caminoHasta3671 = plan.encontrarCaminoMasLargoHasta(3671);
        output += `Path to 3671: ${caminoHasta3671.join('->')}\n`;
        output += `Path length: ${caminoHasta3671.length}\n`;
        output += `Semesters in path: ${plan.contarSemestresEnCamino(caminoHasta3671)}\n`;
        output += `semestresHasta3671 (excluding 3671): ${plan.contarSemestresEnCamino(caminoHasta3671) - 1}\n`;
        
        const semestresHasta3671 = plan.contarSemestresEnCamino(caminoHasta3671) - 1;
        output += `Is odd? ${semestresHasta3671 % 2 === 1}\n\n`;
        
        if (semestresHasta3671 % 2 === 1) {
            const totalWith3671 = semestresHasta3671 + 1 + 2;
            output += `Total with 3671 (with gap): ${semestresHasta3671} + 1 (gap) + 2 (3671) = ${totalWith3671}\n\n`;
        }
        
        output += 'cuatrisMinimosHastaRecibirse(1): ' + plan.cuatrisMinimosHastaRecibirse(1) + '\n';
        
        document.getElementById('output').textContent = output;
    </script>
</body>
</html>
