<!DOCTYPE html>
<html>
<head><title>Debug cuatrisMinimos</title></head>
<body>
    <h1>Debug cuatrisMinimos</h1>
    <pre id="output"></pre>
    <script src="classes.js?v=6"></script>
    <script>
        let output = '';
        
        const allSubjects = [];
        for (let i = 3621; i <= 3680; i++) allSubjects.push(i);
        allSubjects.push(901, 902, 903, 904, 911, 912);
        
        const excluded = new Set([901, 902, 903, 904, 3667, 3671]);
        const completed = allSubjects.filter(id => !excluded.has(id));
        
        const plan = new PlanDeEstudios();
        plan.cargarMateriasDesdeTexto(listado, completed);
        plan.cargarNombresDesdeTexto(tabla_nombres);
        
        output += '=== Debugging cuatrisMinimosHastaRecibirse(2) ===\n\n';
        
        const caminoMasLargoGeneral = plan.encontrarCaminoMasLargo();
        output += `Camino mÃ¡s largo general: ${caminoMasLargoGeneral.join(' -> ')}\n`;
        output += `Length: ${caminoMasLargoGeneral.length}\n`;
        
        const semestresGeneral = plan.contarSemestresEnCamino(caminoMasLargoGeneral, true);
        output += `Semesters (with 3671 adj): ${semestresGeneral}\n\n`;
        
        const caminoHasta3671 = plan.encontrarCaminoMasLargoHasta(3671);
        output += `Camino hasta 3671: ${caminoHasta3671.join(' -> ')}\n`;
        
        const prerequisitosPath = caminoHasta3671.filter(id => id !== 3671);
        output += `Prerequisites: ${prerequisitosPath.join(' -> ')}\n`;
        output += `Prerequisites length: ${prerequisitosPath.length}\n`;
        
        if (prerequisitosPath.length > 0) {
            const semestresPrerequisitos = plan.contarSemestresEnCamino(prerequisitosPath, false);
            output += `Semesters in prereqs: ${semestresPrerequisitos}\n`;
            
            const absoluteSemesterAfterPrereqs = 2 + semestresPrerequisitos - 1;
            output += `Absolute semester after prereqs: ${absoluteSemesterAfterPrereqs}\n`;
            output += `Is Primero (odd)?: ${absoluteSemesterAfterPrereqs % 2 === 1}\n`;
            
            if (absoluteSemesterAfterPrereqs % 2 === 1) {
                const total = semestresPrerequisitos + 1 + 2;
                output += `Total (prereqs + gap + 3671): ${semestresPrerequisitos} + 1 + 2 = ${total}\n`;
                output += `Math.max(${semestresGeneral}, ${total}) = ${Math.max(semestresGeneral, total)}\n`;
            } else {
                const total = semestresPrerequisitos + 2;
                output += `Total (prereqs + 3671): ${semestresPrerequisitos} + 2 = ${total}\n`;
                output += `Math.max(${semestresGeneral}, ${total}) = ${Math.max(semestresGeneral, total)}\n`;
            }
        }
        
        output += `\nFinal result: ${plan.cuatrisMinimosHastaRecibirse(2)}\n`;
        
        document.getElementById('output').textContent = output;
    </script>
</body>
</html>
