<!DOCTYPE html>
<html>
<head><title>Test Fix</title></head>
<body>
    <h1>Test Fix</h1>
    <pre id="output"></pre>
    <script src="classes.js?v=2"></script>
    <script>
        let output = '';
        
        // Create a simple test: only 3667 and 3671 remaining
        const allSubjects = [];
        for (let i = 3621; i <= 3680; i++) allSubjects.push(i);
        allSubjects.push(901, 902, 903, 904, 911, 912);
        
        const excludedSimple = new Set([3667, 3671]);
        const completedSimple = allSubjects.filter(id => !excludedSimple.has(id));
        
        output += '=== TEST: Only 3667 and 3671 left ===\n\n';
        
        // Semester 2 (Segundo)
        const plan2 = new PlanDeEstudios();
        plan2.cargarMateriasDesdeTexto(listado, completedSimple);
        plan2.cargarNombresDesdeTexto(tabla_nombres);
        
        output += 'Testing cuatrisMinimosHastaRecibirse with semester 2:\n';
        const result = plan2.cuatrisMinimosHastaRecibirse(2);
        output += `Result: ${result}\n`;
        output += `Expected: 4\n\n`;
        
        plan2.calcularYGuardarLongitudes(2);
        
        output += 'After calcularYGuardarLongitudes(2):\n';
        output += `3667 valor_corchete: ${plan2.datos_materias[3667].valor_corchete} (expected 1)\n`;
        output += `3667 cuatrimestre: ${plan2.datos_materias[3667].cuatrimestre}\n`;
        output += `3671 valor_corchete: ${plan2.datos_materias[3671].valor_corchete}\n`;
        output += `3671 cuatrimestre: ${plan2.datos_materias[3671].cuatrimestre}\n`;
        
        document.getElementById('output').textContent = output;
    </script>
</body>
</html>
