<!DOCTYPE html>
<html>
<head><title>Debug Case 3</title></head>
<body>
    <h1>Debug Case 3</h1>
    <pre id="output"></pre>
    <script src="classes.js?v=8"></script>
    <script>
        let output = '';
        
        const allSubjects = [];
        for (let i = 3621; i <= 3680; i++) allSubjects.push(i);
        allSubjects.push(901, 902, 903, 904, 911, 912);
        
        // Case 3: All but 903, 904, 3667, 3671
        const excluded3 = new Set([903, 904, 3667, 3671]);
        const completed3 = allSubjects.filter(id => !excluded3.has(id));
        completed3.push(901, 902); // Include 901 and 902
        
        const plan = new PlanDeEstudios();
        plan.cargarMateriasDesdeTexto(listado, completed3);
        plan.cargarNombresDesdeTexto(tabla_nombres);
        plan.calcularYGuardarLongitudes(2);
        
        output += '=== Case 3: All but 903, 904, 3667, 3671, semester Segundo ===\n\n';
        output += `cuatrisMinimos: ${plan.cuatrisMinimosHastaRecibirse(2)}\n\n`;
        
        output += '903:\n';
        if (plan.datos_materias[903]) {
            output += `  valor_corchete: ${plan.datos_materias[903].valor_corchete} (expected 2)\n`;
            output += `  cuatrimestre: ${plan.datos_materias[903].cuatrimestre}\n`;
        }
        
        output += '\n3667:\n';
        if (plan.datos_materias[3667]) {
            output += `  valor_corchete: ${plan.datos_materias[3667].valor_corchete} (expected 1)\n`;
            output += `  cuatrimestre: ${plan.datos_materias[3667].cuatrimestre}\n`;
            
            const pathFrom = plan.encontrarCaminoMasSemestresDesde(3667);
            const pathTo = plan.encontrarCaminoMasSemestresHasta(3667);
            output += `  Path from: ${pathFrom.join(' -> ')}\n`;
            output += `  Semesters from: ${plan.contarSemestresEnCamino(pathFrom, true)}\n`;
            output += `  Path to: ${pathTo.join(' -> ')}\n`;
            output += `  Semesters to: ${plan.contarSemestresEnCamino(pathTo, true)}\n`;
        }
        
        output += '\nLongest path:\n';
        const longest = plan.encontrarCaminoMasLargo();
        output += `  ${longest.join(' -> ')}\n`;
        output += `  Length: ${longest.length}\n`;
        
        document.getElementById('output').textContent = output;
    </script>
</body>
</html>
