<!DOCTYPE html>
<html>
<head><title>Debug Test</title></head>
<body>
    <h1>Debug Test</h1>
    <pre id="output"></pre>
    <script src="classes.js?v=3"></script>
    <script>
        let output = '';
        
        // Create a simple test: only 3667 and 3671 remaining
        const allSubjects = [];
        for (let i = 3621; i <= 3680; i++) allSubjects.push(i);
        allSubjects.push(901, 902, 903, 904, 911, 912);
        
        const excludedSimple = new Set([3667, 3671]);
        const completedSimple = allSubjects.filter(id => !excludedSimple.has(id));
        
        const plan = new PlanDeEstudios();
        plan.cargarMateriasDesdeTexto(listado, completedSimple);
        plan.cargarNombresDesdeTexto(tabla_nombres);
        
        output += '=== DEBUG for semester 2 ===\n\n';
        
        const caminoMasLargoGeneral = plan.encontrarCaminoMasLargo();
        output += `Camino mÃ¡s largo general: ${caminoMasLargoGeneral.join(' -> ')}\n`;
        output += `Length: ${caminoMasLargoGeneral.length}\n`;
        output += `Semesters (with 3671 adjustment): ${plan.contarSemestresEnCamino(caminoMasLargoGeneral, true)}\n\n`;
        
        output += `plan.materias[3671] exists: ${!!plan.materias[3671]}\n\n`;
        
        const caminoHasta3671 = plan.encontrarCaminoMasLargoHasta(3671);
        output += `Camino hasta 3671: ${caminoHasta3671.join(' -> ')}\n`;
        const prerequisitosPath = caminoHasta3671.filter(id => id !== 3671);
        output += `Prerequisites (filtered): ${prerequisitosPath.join(' -> ')}\n`;
        output += `Prerequisites length: ${prerequisitosPath.length}\n\n`;
        
        if (prerequisitosPath.length > 0) {
            const semestresPrerequisitos = plan.contarSemestresEnCamino(prerequisitosPath, false);
            output += `Semesters in prerequisites: ${semestresPrerequisitos}\n`;
            
            const absoluteSemesterAfterPrereqs = 2 + semestresPrerequisitos - 1;
            output += `Absolute semester after prereqs: ${absoluteSemesterAfterPrereqs}\n`;
            output += `Is odd (Primero)?: ${absoluteSemesterAfterPrereqs % 2 === 1}\n\n`;
            
            if (absoluteSemesterAfterPrereqs % 2 === 1) {
                output += `Path: prereqs (${semestresPrerequisitos}) + gap (1) + 3671 (2) = ${semestresPrerequisitos + 1 + 2}\n`;
            } else {
                output += `Path: prereqs (${semestresPrerequisitos}) + 3671 (2) = ${semestresPrerequisitos + 2}\n`;
            }
        }
        
        output += `\nFinal cuatrisMinimos: ${plan.cuatrisMinimosHastaRecibirse(2)}\n`;
        
        document.getElementById('output').textContent = output;
    </script>
</body>
</html>
