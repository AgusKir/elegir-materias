<!DOCTYPE html>
<html>
<head>
    <title>All Test Scenarios</title>
</head>
<body>
    <h1>Testing all scenarios from the issue</h1>
    <pre id="output"></pre>
    
    <script src="classes.js"></script>
    <script>
        let output = '';
        
        // Scenario 1: Subjects 3621-3640, 3642, 3643, 3645, 3649, 3651, 901, 902, 911, 912
        // Semester: Segundo (2)
        output += '=== SCENARIO 1: Segundo cuatrimestre ===\n\n';
        const completedSubjects1 = [
            3621, 3622, 3623, 3624, 3625, 3626, 3627, 3628, 3629, 3630,
            3631, 3632, 3633, 3634, 3635, 3636, 3637, 3638, 3639, 3640,
            3642, 3643, 3645, 3649, 3651, 901, 902, 911, 912
        ];
        
        const plan1 = new PlanDeEstudios();
        plan1.cargarMateriasDesdeTexto(listado, completedSubjects1);
        plan1.cargarNombresDesdeTexto(tabla_nombres);
        plan1.calcularYGuardarLongitudes(2);  // Segundo
        
        const expected1 = {
            3644: 1, 3650: 1, 3647: 2, 3648: 2, 3654: 2,
            3641: 3, 3646: 3, 3656: 3, 903: 4, 3662: 5,
            3675: 5, 3676: 5
        };
        
        output += 'Subject | Expected | Actual | Match?\n';
        output += '--------|----------|--------|-------\n';
        for (const [id, expectedValue] of Object.entries(expected1)) {
            const actual = plan1.datos_materias[id];
            const actualValue = actual ? actual.valor_corchete : 'N/A';
            const match = actualValue === expectedValue ? '✓' : '✗';
            output += `${id.padEnd(7)} | ${String(expectedValue).padEnd(8)} | ${String(actualValue).padEnd(6)} | ${match}\n`;
        }
        
        // Check which subjects would appear in materiasProximoCuatri
        output += '\nSubjects available for next semester (valor_corchete order):\n';
        const nextSemester1 = plan1.materiasProximoCuatri(20);
        const allNext1 = [...(nextSemester1.materias_fijas || []), ...(nextSemester1.materias_opcionales || [])];
        allNext1.forEach(materia => {
            const match = materia.match(/\[(\d+)\].*\((\d+)\)/);
            if (match) {
                output += `  ${match[2]} - ${match[1]}\n`;
            }
        });
        
        // Scenario 2: All but 901, 902, 903, 904, 3667, 3671
        // Semester: Primero (1)
        output += '\n\n=== SCENARIO 2: All but English and 3667, 3671 - Primero ===\n\n';
        const allSubjects2 = [];
        for (let id = 3621; id <= 3680; id++) {
            if (![3667, 3671].includes(id)) {
                allSubjects2.push(id);
            }
        }
        allSubjects2.push(911, 912);
        
        const plan2 = new PlanDeEstudios();
        plan2.cargarMateriasDesdeTexto(listado, allSubjects2);
        plan2.cargarNombresDesdeTexto(tabla_nombres);
        plan2.calcularYGuardarLongitudes(1);  // Primero
        
        const expected2 = { 901: 1, 3667: 2 };
        
        output += 'Subject | Expected | Actual | Match?\n';
        output += '--------|----------|--------|-------\n';
        for (const [id, expectedValue] of Object.entries(expected2)) {
            const actual = plan2.datos_materias[id];
            const actualValue = actual ? actual.valor_corchete : 'N/A';
            const match = actualValue === expectedValue ? '✓' : '✗';
            output += `${id.padEnd(7)} | ${String(expectedValue).padEnd(8)} | ${String(actualValue).padEnd(6)} | ${match}\n`;
        }
        
        output += '\nSubjects available for next semester:\n';
        const nextSemester2 = plan2.materiasProximoCuatri(20);
        const allNext2 = [...(nextSemester2.materias_fijas || []), ...(nextSemester2.materias_opcionales || [])];
        allNext2.forEach(materia => {
            const match = materia.match(/\[(\d+)\].*\((\d+)\)/);
            if (match) {
                output += `  ${match[2]} - ${match[1]}\n`;
            }
        });
        
        document.getElementById('output').textContent = output;
    </script>
</body>
</html>
